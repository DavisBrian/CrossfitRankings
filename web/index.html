<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>2014 Open Stats</title>

    <!-- Bootstrap -->
    <link href="lib/bootstrap.min.css" rel="stylesheet">
    <link href="lib/bootstrap-theme.min.css" rel="stylesheet">
    <link href="lib/nv.d3.css" rel="stylesheet">

	<style>
		#chart svg {
		  height: 400px;
		}
	</style>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <h1>2014 Open Stats</h1>

	<div id="chart">
	  <svg></svg>
	</div>


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="lib/bootstrap.min.js"></script>
    <script src="lib/d3.min.js"></script>
    <script src="lib/nv.d3.min.js"></script>
    <script type="text/javascript">
		function data() {
		  return stream_layers(3,10+Math.random()*100,.1).map(function(data, i) {
		    return {
		      key: 'Stream' + i,
		      values: data
		    };
		  });
		}

		/* Inspired by Lee Byron's test data generator. */
		function stream_layers(n, m, o) {
		  if (arguments.length < 3) o = 0;
		  function bump(a) {
		    var x = 1 / (.1 + Math.random()),
		        y = 2 * Math.random() - .5,
		        z = 10 / (.1 + Math.random());
		    for (var i = 0; i < m; i++) {
		      var w = (i / m - y) * z;
		      a[i] += x * Math.exp(-w * w);
		    }
		  }
		  return d3.range(n).map(function() {
		      var a = [], i;
		      for (i = 0; i < m; i++) a[i] = o + o * Math.random();
		      for (i = 0; i < 5; i++) bump(a);
		      return a.map(stream_index);
		    });
		}

		/* Another layer generator using gamma distributions. */
		function stream_waves(n, m) {
		  return d3.range(n).map(function(i) {
		    return d3.range(m).map(function(j) {
		        var x = 20 * j / m - i / 3;
		        return 2 * x * Math.exp(-.5 * x);
		      }).map(stream_index);
		    });
		}

		function stream_index(d, i) {
		  return {x: i, y: Math.max(0, d)};
		}

		nv.addGraph(function() {
			var chart = nv.models.multiBarChart();

			chart.xAxis
			.tickFormat(d3.format(',f'));

			chart.yAxis
			.tickFormat(d3.format(',.1f'));

			d3.select('#chart svg')
			.datum(data())
			.transition().duration(500)
			.call(chart);

			nv.utils.windowResize(chart.update);

			return chart;
		});
    </script>
  </body>
</html>
